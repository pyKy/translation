<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Gallery of Examples » Shuffled Camera Feed Puzzle &mdash; kivy-intro-jp 1.0 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="kivy-intro-jp 1.0 ドキュメント" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Kivy Japanese Translation</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入門(Getting Started)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル(Tutorial)</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page Contents <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Gallery of Examples » Shuffled Camera Feed Puzzle</a></li>
<li><a class="reference internal" href="#demo-camera-puzzle-py">demo/camera_puzzle.py</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入門(Getting Started)</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル(Tutorial)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/pong_game_tutorial.html">ポンゲームチューtリアル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/simple_paint_app.html">シンプルなペイントアプリケーション</a></li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="gallery-of-examples-shuffled-camera-feed-puzzle">
<h1>Gallery of Examples » Shuffled Camera Feed Puzzle<a class="headerlink" href="#gallery-of-examples-shuffled-camera-feed-puzzle" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>このドキュメンテーションはGallery of Examples » Shuffled Camera Feed Puzzleを日本語訳したものです。
<a class="reference external" href="https://kivy.org/docs/examples/gen__demo__camera_puzzle__py.html">https://kivy.org/docs/examples/gen__demo__camera_puzzle__py.html</a></p>
<img alt="https://kivy.org/docs/_images/demo__camera_puzzle__py1.png" src="https://kivy.org/docs/_images/demo__camera_puzzle__py1.png" />
<p>ライブカメラでScatterwidgetを使用しデモしています。
カメラフィードを構成するシャッフルされた長方形のグリッドが表示されます。
グリッドをダブルクリックすることを繰り返して張り替えるか、四角形をドラッグすることでカメラフィードを元にもどせます。</p>
</div>
<div class="section" id="demo-camera-puzzle-py">
<h1>demo/camera_puzzle.py<a class="headerlink" href="#demo-camera-puzzle-py" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-python"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>&#8216;&#8217;&#8217;
Shuffled Camera Feed Puzzle
===========================</p>
<p>This demonstrates using Scatter widgets with a live camera.
You should see a shuffled grid of rectangles that make up the
camera feed. You can drag the squares around to see the
unscrambled camera feed or double click to scramble the grid
again.
&#8216;&#8217;&#8216;</p>
<p>from kivy.app import App
from kivy.uix.camera import Camera
from kivy.uix.widget import Widget
from kivy.uix.slider import Slider
from kivy.uix.scatter import Scatter
from kivy.animation import Animation
from kivy.graphics import Color, Rectangle
from kivy.properties import NumericProperty
from random import randint, random
from functools import partial</p>
<p>class Puzzle(Camera):</p>
<blockquote>
<div><p>blocksize = NumericProperty(100)</p>
<dl class="docutils">
<dt>def on_texture_size(self, instance, value):</dt>
<dd>self.build()</dd>
<dt>def on_blocksize(self, instance, value):</dt>
<dd>self.build()</dd>
<dt>def build(self):</dt>
<dd><p class="first">self.clear_widgets()
texture = self.texture
if not texture:</p>
<blockquote>
<div>return</div></blockquote>
<p>bs = self.blocksize
tw, th = self.texture_size
for x in range(int(tw / bs)):</p>
<blockquote>
<div><dl class="docutils">
<dt>for y in range(int(th / bs)):</dt>
<dd><p class="first">bx = x * bs
by = y * bs
subtexture = texture.get_region(bx, by, bs, bs)
#node = PuzzleNode(texture=subtexture,
#                  size=(bs, bs), pos=(bx, by))
node = Scatter(pos=(bx, by), size=(bs, bs))
with node.canvas:</p>
<blockquote>
<div>Color(1, 1, 1)
Rectangle(size=node.size, texture=subtexture)</div></blockquote>
<p class="last">self.add_widget(node)</p>
</dd>
</dl>
</div></blockquote>
<p class="last">self.shuffle()</p>
</dd>
<dt>def shuffle(self):</dt>
<dd><p class="first">texture = self.texture
bs = self.blocksize
tw, th = self.texture_size
count = int(tw / bs) * int(th / bs)
indices = list(range(count))
childindex = 0
while indices:</p>
<blockquote class="last">
<div><p>index = indices.pop(randint(0, len(indices) - 1))
x = bs * (index % int(tw / bs))
y = bs * int(index / int(tw / bs))
child = self.children[childindex]
a = Animation(d=random() / 4.) + Animation(pos=(x, y),</p>
<blockquote>
<div>t=&#8217;out_quad&#8217;, d=.4)</div></blockquote>
<p>a.start(child)
childindex += 1</p>
</div></blockquote>
</dd>
<dt>def on_touch_down(self, touch):</dt>
<dd><dl class="first docutils">
<dt>if touch.is_double_tap:</dt>
<dd>self.shuffle()
return True</dd>
</dl>
<p class="last">super(Puzzle, self).on_touch_down(touch)</p>
</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>class PuzzleApp(App):</dt>
<dd><dl class="first last docutils">
<dt>def build(self):</dt>
<dd><p class="first">root = Widget()
puzzle = Puzzle(resolution=(640, 480), play=True)
slider = Slider(min=100, max=200, step=10, size=(800, 50))
slider.bind(value=partial(self.on_value, puzzle))</p>
<p class="last">root.add_widget(puzzle)
root.add_widget(slider)
return root</p>
</dd>
<dt>def on_value(self, puzzle, instance, value):</dt>
<dd>value = int((value + 5) / 10) * 10
puzzle.blocksize = value
instance.value = value</dd>
</dl>
</dd>
</dl>
<p>PuzzleApp().run()</p>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Daisuke Saito.<br/>
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4 で生成しました。<br/>
    </p>
  </div>
</footer>
  </body>
</html>