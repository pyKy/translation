<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Multitexture Example &mdash; kivy-intro-jp 1.0 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="kivy-intro-jp 1.0 ドキュメント" href="../index.html" />
    <link rel="up" title="実例集(Gallery of Examples)" href="index.html" />
    <link rel="next" title="Gallery of Examples » Repeat Texture on Resize" href="gen__canvas__repeat_texture__py.html" />
    <link rel="prev" title="Mesh test" href="gen__canvas__mesh__py.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Kivy Japanese Translation</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入門(Getting Started)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">実例集(Gallery of Examples)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/index.html">ユーザーガイド(User’s Guide)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming_guide/index.html">プログラミングガイド(Programming Guide)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル(Tutorial)</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page Contents <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Multitexture Example</a><ul>
<li><a class="reference internal" href="#canvas-multitexture-py">canvas/multitexture.py</a><ul>
<li><a class="reference internal" href="#id1">}</a></li>
</ul>
</li>
<li><a class="reference internal" href="#image-canvas-mtexture1-png">Image canvas/mtexture1.png　画像ファイル</a></li>
<li><a class="reference internal" href="#canvas-mtexture2-png">canvas/mtexture2.png　画像ファイル</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="gen__canvas__mesh__py.html" title="Previous Chapter: Mesh test"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mesh test</span>
    </a>
  </li>
  <li>
    <a href="gen__canvas__repeat_texture__py.html" title="Next Chapter: Gallery of Examples » Repeat Texture on Resize"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Gallery of Ex... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入門(Getting Started)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/introduction.html">導入</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html">インストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html#id2">開発バージョン</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/first_app.html">概要</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/properties.html">入門</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/event.html">イベント</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/Non-widget_stuff.html">Non-widget stuff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/layouts.html">導入</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/drawing.html">入門</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">実例集(Gallery of Examples)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__3Drendering__main__py.html">3Dのサルの頭を回転する</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__animation__animate__py.html">ウィジェットアニメーション</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_suite__py.html">Suite of Application Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_with_build__py.html">build() と return を使用したアプリケーションの例</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_with_kv_in_template1__py.html">Application from a .kv in a Template Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_with_kv__py.html">アプリケーションを.kv fileからビルドする</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__camera__main__py.html">Gallery of Examples » Camera Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__bezier__py.html">Bezier Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__canvas_stress__py.html">Canvas stress</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__circle__py.html">Circle Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__fbo_canvas__py.html">FBO Canvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__fbo_canvas__py.html#canvas-fbo-canvas-py">canvas/fbo_canvas.pyファイル</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__lines_extended__py.html">Lines Extended Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__lines__py.html">Line (SmoothLine) Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__mesh__py.html">Mesh test</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multitexture Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__repeat_texture__py.html">Gallery of Examples » Repeat Texture on Resize</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__rotation__py.html">Rotation Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__stencil_canvas__py.html">Gallery of Examples » Stencil demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__tesselate__py.html">Gallery of Examples » Tesselate Demonstration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__texture__py.html">Gallery of Examples » Texture Wrapping and Coordinates Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__camera_puzzle__py..html">Shuffled Camera Feed Puzzle</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__kivycatalog__main__py.html">Kivy Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__multistroke__main__py.html">Multistroke Recognition Database Demonstration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__pictures__main__py.html">Gallery of Examples » Kivy Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__shadereditor__main__py.html">Live Shader Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__showcase__main__py.html">Showcase of Kivy Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__touchtracer__main__py.html">Gallery of Examples » Touch Tracer Line Drawing Demonstration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/index.html">ユーザーガイド(User’s Guide)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users_guide/philosophy.html">フィロソフィ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../programming_guide/index.html">プログラミングガイド(Programming Guide)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/basic.html">Kivyの基礎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/basic.html#id2">アプリケーションを作る</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/architectural_overview.html">構造的概要</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/packaging-windows.html">Widowsでのパッケージの方法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル(Tutorial)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/pong_game_tutorial.html">ポンゲームチューtリアル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/simple_paint_app.html">シンプルなペイントアプリケーション</a></li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="multitexture-example">
<h1>Multitexture Example<a class="headerlink" href="#multitexture-example" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>このドキュメンテーションはGallery of Examples » Multitexture Exampleを日本語訳したものです。
<a class="reference external" href="https://kivy.org/docs/examples/gen__canvas__multitexture__py.html">https://kivy.org/docs/examples/gen__canvas__multitexture__py.html</a></p>
<img alt="https://kivy.org/docs/_images/canvas__multitexture__py1.png" src="https://kivy.org/docs/_images/canvas__multitexture__py1.png" />
<p>文字Kの画像（mtexture1.png）とオレンジ色の円の画像（mtexture2.pngの画像）の2つのテクスチャをブレンドする例です。</p>
<p>Kが円にクリップされオレンジ色に表示されますす。
ローカル文字列に格納されているGLSL（OpenGLのシェーディング言語）で記述されたカスタムシェーダを使用しています。</p>
<p>注：mtexture1.pngは白色で&#8217;K&#8217;で背景が透明なので目視が難しいです。</p>
<div class="section" id="canvas-multitexture-py">
<h2>canvas/multitexture.py<a class="headerlink" href="#canvas-multitexture-py" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>&#8216;&#8217;&#8217;
Multitexture Example
====================</p>
<p>This example blends two textures: the image mtexture1.png of the letter K
and the image mtexture2.png of an orange circle. You should see an orange
K clipped to a circle. It uses a custom shader, written in glsl
(OpenGL Shading Language), stored in a local string.</p>
<p>Note the image mtexture1.png is a white &#8216;K&#8217; on a transparent background, which
makes it hard to see.
&#8216;&#8217;&#8216;</p>
<p>from kivy.clock import Clock
from kivy.app import App
from kivy.uix.widget import Widget
from kivy.uix.floatlayout import FloatLayout
from kivy.lang import Builder
from kivy.core.window import Window
from kivy.graphics import RenderContext, Color, Rectangle, BindTexture</p>
<p>fs_multitexture = &#8216;&#8217;&#8217;
$HEADER$</p>
<p>// New uniform that will receive texture at index 1
uniform sampler2D texture1;</p>
<p>void main(void) {</p>
<blockquote>
<div><p>// multiple current color with both texture (0 and 1).
// currently, both will use exactly the same texture coordinates.
gl_FragColor = frag_color * </p>
<blockquote>
<div>texture2D(texture0, tex_coord0) * texture2D(texture1, tex_coord0);</div></blockquote>
</div></blockquote>
<div class="section" id="id1">
<h3>}<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>kv = &#8220;&#8221;&#8221;
&lt;MultitextureLayout&gt;:</p>
<blockquote>
<div><dl class="docutils">
<dt>Image:</dt>
<dd>source: &#8220;mtexture1.png&#8221;
size_hint: .3,.3
id: 1
pos: 0,200</dd>
<dt>Image:</dt>
<dd>source: &#8220;mtexture2.png&#8221;
size_hint: .3,.3
id: 2
pos: 200,200</dd>
</dl>
<p>MultitextureWidget:</p>
</div></blockquote>
<p>&#8220;&#8221;&#8220;</p>
<p>Builder.load_string(kv)</p>
<p>class MultitextureWidget(Widget):</p>
<blockquote>
<div><dl class="docutils">
<dt>def __init__(self, <a href="#id2"><span class="problematic" id="id3">**</span></a>kwargs):</dt>
<dd><p class="first">self.canvas = RenderContext()
# setting shader.fs to new source code automatically compiles it.
self.canvas.shader.fs = fs_multitexture
with self.canvas:</p>
<blockquote>
<div><p>Color(1, 1, 1)</p>
<p># here, we are binding a custom texture at index 1
# this will be used as texture1 in shader.
# The filenames are misleading: they do not correspond to the
# index here or in the shader.
BindTexture(source=&#8217;mtexture2.png&#8217;, index=1)</p>
<p># create a rectangle with texture (will be at index 0)
Rectangle(size=(150, 150), source=&#8217;mtexture1.png&#8217;, pos=(500, 200))</p>
</div></blockquote>
<p># set the texture1 to use texture index 1
self.canvas[&#8216;texture1&#8217;] = 1</p>
<p># call the constructor of parent
# if they are any graphics objects, they will be added on our new
# canvas
super(MultitextureWidget, self).__init__(<a href="#id4"><span class="problematic" id="id5">**</span></a>kwargs)</p>
<p class="last"># We&#8217;ll update our glsl variables in a clock
Clock.schedule_interval(self.update_glsl, 0)</p>
</dd>
<dt>def update_glsl(self, <a href="#id6"><span class="problematic" id="id7">*</span></a>largs):</dt>
<dd># This is needed for the default vertex shader.
self.canvas[&#8216;projection_mat&#8217;] = Window.render_context[&#8216;projection_mat&#8217;]
self.canvas[&#8216;modelview_mat&#8217;] = Window.render_context[&#8216;modelview_mat&#8217;]</dd>
</dl>
</div></blockquote>
<p>class MultitextureLayout(FloatLayout):</p>
<blockquote>
<div><dl class="docutils">
<dt>def __init__(self, <a href="#id8"><span class="problematic" id="id9">**</span></a>kwargs):</dt>
<dd>self.size = kwargs[&#8216;size&#8217;]
super(MultitextureLayout, self).__init__(<a href="#id10"><span class="problematic" id="id11">**</span></a>kwargs)</dd>
</dl>
</div></blockquote>
<p>class MultitextureApp(App):</p>
<blockquote>
<div><dl class="docutils">
<dt>def build(self):</dt>
<dd>return MultitextureLayout(size=(600, 600))</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>if __name__ == &#8216;__main__&#8217;:</dt>
<dd>MultitextureApp().run()</dd>
</dl>
</div>
</div>
<div class="section" id="image-canvas-mtexture1-png">
<h2>Image canvas/mtexture1.png　画像ファイル<a class="headerlink" href="#image-canvas-mtexture1-png" title="このヘッドラインへのパーマリンク">¶</a></h2>
<img alt="https://kivy.org/docs/_images/mtexture1.png" src="https://kivy.org/docs/_images/mtexture1.png" />
</div>
<div class="section" id="canvas-mtexture2-png">
<h2>canvas/mtexture2.png　画像ファイル<a class="headerlink" href="#canvas-mtexture2-png" title="このヘッドラインへのパーマリンク">¶</a></h2>
<img alt="https://kivy.org/docs/_images/mtexture2.png" src="https://kivy.org/docs/_images/mtexture2.png" />
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Daisuke Saito.<br/>
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.2 で生成しました。<br/>
    </p>
  </div>
</footer>
  </body>
</html>