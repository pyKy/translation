<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Stencil demo &mdash; kivy-intro-jp 1.0 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="kivy-intro-jp 1.0 ドキュメント" href="../index.html" />
    <link rel="up" title="実例集(Gallery of Examples)" href="index.html" />
    <link rel="next" title="Tesselate Demonstration" href="gen__canvas__tesselate__py.html" />
    <link rel="prev" title="Rotation Example" href="gen__canvas__rotation__py.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Kivy Japanese Translation</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入門(Getting Started)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">実例集(Gallery of Examples)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/index.html">ユーザーガイド(User’s Guide)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming_guide/index.html">プログラミングガイド(Programming Guide)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル(Tutorial)</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page Contents <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Stencil demo</a><ul>
<li><a class="reference internal" href="#canvas-stencil-canvas-py">canvas/stencil_canvas.pyファイル</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="gen__canvas__rotation__py.html" title="Previous Chapter: Rotation Example"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Rotation Example</span>
    </a>
  </li>
  <li>
    <a href="gen__canvas__tesselate__py.html" title="Next Chapter: Tesselate Demonstration"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Tesselate Dem... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入門(Getting Started)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/introduction.html">導入</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html">インストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html#id2">開発バージョン</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/first_app.html">概要</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/properties.html">入門</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/event.html">イベント</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/Non-widget_stuff.html">Non-widget stuff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/layouts.html">導入</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/drawing.html">入門</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">実例集(Gallery of Examples)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__3Drendering__main__py.html">3Dのサルの頭を回転する</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__animation__animate__py.html">ウィジェットアニメーション</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_suite__py.html">Suite of Application Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_with_build__py.html">build() と return を使用したアプリケーションの例</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_with_kv_in_template1__py.html">Application from a .kv in a Template Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__application__app_with_kv__py.html">アプリケーションを.kv fileからビルドする</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__camera__main__py.html">Gallery of Examples » Camera Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__bezier__py.html">Bezier Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__canvas_stress__py.html">Canvas stress</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__circle__py.html">Circle Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__fbo_canvas__py.html">FBO Canvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__lines_extended__py.html">Lines Extended Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__lines__py.html">Line (SmoothLine) Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__mesh__py.html">Mesh test</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__multitexture__py.html">Multitexture Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__repeat_texture__py.html">Gallery of Examples » Repeat Texture on Resize</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__rotation__py.html">Rotation Example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Stencil demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__tesselate__py.html">Tesselate Demonstration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__canvas__texture__py.html">Gallery of Examples » Texture Wrapping and Coordinates Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__camera_puzzle__py..html">Shuffled Camera Feed Puzzle</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__kivycatalog__main__py.html">Kivy Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__multistroke__main__py.html">Multistroke Recognition Database Demonstration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__pictures__main__py.html">Gallery of Examples » Kivy Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__shadereditor__main__py.html">Live Shader Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__showcase__main__py.html">Showcase of Kivy Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen__demo__touchtracer__main__py.html">Gallery of Examples » Touch Tracer Line Drawing Demonstration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/index.html">ユーザーガイド(User’s Guide)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users_guide/philosophy.html">フィロソフィ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../programming_guide/index.html">プログラミングガイド(Programming Guide)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/basic.html">Kivyの基礎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/basic.html#id2">アプリケーションを作る</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/architectural_overview.html">構造的概要</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programming_guide/packaging-windows.html">Widowsでのパッケージの方法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル(Tutorial)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/pong_game_tutorial.html">ポンゲームチューtリアル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/simple_paint_app.html">シンプルなペイントアプリケーション</a></li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="stencil-demo">
<h1>Stencil demo<a class="headerlink" href="#stencil-demo" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>このドキュメンテーションはGallery of Examples » Stencil demoを日本語訳したものです。
<a class="reference external" href="https://kivy.org/docs/examples/gen__canvas__stencil_canvas__py.html">https://kivy.org/docs/examples/gen__canvas__stencil_canvas__py.html</a></p>
<img alt="https://kivy.org/docs/_images/canvas__stencil_canvas__py1.png" src="https://kivy.org/docs/_images/canvas__stencil_canvas__py1.png" />
<p>stencil view widget内部のstencilグラフィックス命令のテストです。
stencilを使用すると、バウンディングボックスの外側には何も描画されません。すべてのグラフィックはstencil viewで描画されます。</p>
<p>あなたはタッチ＆ドローによってstencil viewを「描く」ことができます。タッチダウンは、位置を設定し、ドラッグしてサイズを設定します</p>
<div class="section" id="canvas-stencil-canvas-py">
<h2>canvas/stencil_canvas.pyファイル<a class="headerlink" href="#canvas-stencil-canvas-py" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>&#8216;&#8217;&#8217;
Stencil demo
============</p>
<p>This is a test of the stencil graphics instruction inside the stencil view
widget. When you use a stencil, nothing will be drawn outside the bounding
box. All the graphics will draw only in the stencil view.</p>
<p>You can &#8220;draw&#8221; a stencil view by touch &amp; draw. The touch down will set the
position, and the drag will set the size.
&#8216;&#8217;&#8216;</p>
<p>from kivy.app import App
from kivy.core.window import Window
from kivy.graphics import Color, Rectangle
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.button import Button
from kivy.uix.label import Label
from kivy.uix.stencilview import StencilView
from random import random as r
from functools import partial</p>
<dl class="docutils">
<dt>class StencilTestWidget(StencilView):</dt>
<dd><p class="first">&#8216;&#8217;&#8216;Drag to define stencil area
&#8216;&#8217;&#8216;</p>
<dl class="last docutils">
<dt>def on_touch_down(self, touch):</dt>
<dd>self.pos = touch.pos
self.size = (1, 1)</dd>
<dt>def on_touch_move(self, touch):</dt>
<dd>self.size = (touch.x - touch.ox, touch.y - touch.oy)</dd>
</dl>
</dd>
</dl>
<p>class StencilCanvasApp(App):</p>
<blockquote>
<div><dl class="docutils">
<dt>def add_rects(self, label, wid, count, <a href="#id1"><span class="problematic" id="id2">*</span></a>largs):</dt>
<dd><p class="first">label.text = str(int(label.text) + count)
with wid.canvas:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>for x in range(count):</dt>
<dd><p class="first">Color(r(), 1, 1, mode=&#8217;hsv&#8217;)
Rectangle(pos=(r() * wid.width + wid.x,</p>
<blockquote class="last">
<div>r() * wid.height + wid.y), size=(10, 10))</div></blockquote>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>def reset_stencil(self, wid, <a href="#id3"><span class="problematic" id="id4">*</span></a>largs):</dt>
<dd>wid.pos = (0, 0)
wid.size = Window.size</dd>
<dt>def reset_rects(self, label, wid, <a href="#id5"><span class="problematic" id="id6">*</span></a>largs):</dt>
<dd>label.text = &#8216;0&#8217;
wid.canvas.clear()</dd>
<dt>def build(self):</dt>
<dd><p class="first">wid = StencilTestWidget(size_hint=(None, None), size=Window.size)</p>
<p>label = Label(text=&#8216;0&#8217;)</p>
<p>btn_add500 = Button(text=&#8217;+ 200 rects&#8217;)
btn_add500.bind(on_press=partial(self.add_rects, label, wid, 200))</p>
<p>btn_reset = Button(text=&#8217;Reset Rectangles&#8217;)
btn_reset.bind(on_press=partial(self.reset_rects, label, wid))</p>
<p>btn_stencil = Button(text=&#8217;Reset Stencil&#8217;)
btn_stencil.bind(on_press=partial(self.reset_stencil, wid))</p>
<p>layout = BoxLayout(size_hint=(1, None), height=50)
layout.add_widget(btn_add500)
layout.add_widget(btn_reset)
layout.add_widget(btn_stencil)
layout.add_widget(label)</p>
<p>root = BoxLayout(orientation=&#8217;vertical&#8217;)
rfl = FloatLayout()
rfl.add_widget(wid)
root.add_widget(rfl)
root.add_widget(layout)</p>
<p class="last">return root</p>
</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>if __name__ == &#8216;__main__&#8217;:</dt>
<dd>StencilCanvasApp().run()</dd>
</dl>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Daisuke Saito.<br/>
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.2 で生成しました。<br/>
    </p>
  </div>
</footer>
  </body>
</html>